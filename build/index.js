/*!
 * 
 *   @hodgef/js-library-boilerplate-basic v1.6.245
 *   https://github.com/hodgef/js-library-boilerplate-basic
 *
 *   Copyright (c) Francisco Hodge (https://github.com/hodgef) and project contributors.
 *
 *   This source code is licensed under the MIT license found in the
 *   LICENSE file in the root directory of this source tree.
 *
 */
!function(e,t){"object"==typeof exports&&"object"==typeof module?module.exports=t():"function"==typeof define&&define.amd?define([],t):"object"==typeof exports?exports.GleapHelper=t():e.GleapHelper=t()}(self,(()=>(()=>{"use strict";var e={655:(e,t)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.getAttributes=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:["id","class","length"],o=e.attributes;return[].concat(function(e){if(Array.isArray(e)){for(var t=0,o=Array(e.length);t<e.length;t++)o[t]=e[t];return o}return Array.from(e)}(o)).reduce((function(e,o){return t.indexOf(o.nodeName)>-1||e.push("["+o.nodeName+'="'+o.value+'"]'),e}),[])}},635:(e,t)=>{function o(e){if(!e.hasAttribute("class"))return[];try{return Array.prototype.slice.call(e.classList).filter((function(e){return/^[a-z_-][a-z\d_-]*$/i.test(e)?e:null}))}catch(o){var t=e.getAttribute("class");return(t=t.trim().replace(/\s+/g," ")).split(" ")}}Object.defineProperty(t,"__esModule",{value:!0}),t.getClasses=o,t.getClassSelectors=function(e){return o(e).filter(Boolean).map((function(e){return"."+e}))}},658:(e,t)=>{function o(e,t,r,i,n,s,l){if(s!==l)for(var a=i;a<=n&&n-a+1>=l-s;++a)r[s]=t[a],o(e,t,r,a+1,n,s+1,l);else e.push(r.slice(0,s).join(""))}Object.defineProperty(t,"__esModule",{value:!0}),t.getCombinations=function(e,t){for(var r=[],i=e.length,n=[],s=1;s<=t;++s)o(r,e,n,0,i-1,0,s);return r}},72:(e,t)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.getID=function(e){var t=e.getAttribute("id");if(null!==t&&""!==t)return t.match(/(?:^\d|:)/)?'[id="'+t+'"]':"#"+t;return null}},803:(e,t,o)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.getNthChild=function(e){var t=0,o=void 0,i=void 0,n=e.parentNode;if(Boolean(n)){var s=n.childNodes,l=s.length;for(o=0;o<l;o++)if(i=s[o],(0,r.isElement)(i)&&(t++,i===e))return":nth-child("+t+")"}return null};var r=o(741)},581:(e,t,o)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.getParents=function(e){var t=[],o=e;for(;(0,r.isElement)(o);)t.push(o),o=o.parentNode;return t};var r=o(741)},822:(e,t)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.getTag=function(e){return e.tagName.toLowerCase().replace(/:/g,"\\:")}},761:(e,t,o)=>{t.Z=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},o=t.selectorTypes,r=void 0===o?["ID","Class","Tag","NthChild"]:o,i=t.attributesToIgnore,n=void 0===i?["id","class","length"]:i,s=t.excludeRegex,l=void 0===s?null:s,a=[],c=(0,d.getParents)(e),h=!0,v=!1,y=void 0;try{for(var p,m=c[Symbol.iterator]();!(h=(p=m.next()).done);h=!0){var g=f(p.value,r,n,l);Boolean(g)&&a.push(g)}}catch(e){v=!0,y=e}finally{try{!h&&m.return&&m.return()}finally{if(v)throw y}}var b=[],w=!0,C=!1,x=void 0;try{for(var k,M=a[Symbol.iterator]();!(w=(k=M.next()).done);w=!0){var S=k.value;b.unshift(S);var O=b.join(" > ");if((0,u.isUnique)(e,O))return O}}catch(e){C=!0,x=e}finally{try{!w&&M.return&&M.return()}finally{if(C)throw x}}return null};var r=o(72),i=o(635),n=o(658),s=o(655),l=o(803),a=o(822),u=o(942),d=o(581);function c(e,t){var o=e.parentNode.querySelectorAll(t);return 1===o.length&&o[0]===e}function h(e,t){return t.find(c.bind(null,e))}function v(e,t,o){var r=(0,n.getCombinations)(t,3),i=h(e,r);return Boolean(i)||Boolean(o)&&(i=h(e,r=r.map((function(e){return o+e}))),Boolean(i))?i:null}function f(e,t,o,n){var u=void 0,d=function(e,t,o){var n={Tag:a.getTag,NthChild:l.getNthChild,Attributes:function(e){return(0,s.getAttributes)(e,o)},Class:i.getClassSelectors,ID:r.getID};return t.reduce((function(t,o){return t[o]=n[o](e),t}),{})}(e,t,o);n&&n instanceof RegExp&&(d.ID=n.test(d.ID)?null:d.ID,d.Class=d.Class.filter((function(e){return!n.test(e)})));var h=!0,f=!1,y=void 0;try{for(var p,m=t[Symbol.iterator]();!(h=(p=m.next()).done);h=!0){var g=p.value,b=d.ID,w=d.Tag,C=d.Class,x=d.Attributes,k=d.NthChild;switch(g){case"ID":if(Boolean(b)&&c(e,b))return b;break;case"Tag":if(Boolean(w)&&c(e,w))return w;break;case"Class":if(Boolean(C)&&C.length&&(u=v(e,C,w)))return u;break;case"Attributes":if(Boolean(x)&&x.length&&(u=v(e,x,w)))return u;break;case"NthChild":if(Boolean(k))return k}}}catch(e){f=!0,y=e}finally{try{!h&&m.return&&m.return()}finally{if(f)throw y}}return"*"}},741:(e,t)=>{Object.defineProperty(t,"__esModule",{value:!0});var o="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e};t.isElement=function(e){var t=void 0;t="object"===("undefined"==typeof HTMLElement?"undefined":o(HTMLElement))?e instanceof HTMLElement:!!e&&"object"===(void 0===e?"undefined":o(e))&&1===e.nodeType&&"string"==typeof e.nodeName;return t}},942:(e,t)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.isUnique=function(e,t){if(!Boolean(t))return!1;var o=e.ownerDocument.querySelectorAll(t);return 1===o.length&&o[0]===e}}},t={};function o(r){var i=t[r];if(void 0!==i)return i.exports;var n=t[r]={exports:{}};return e[r](n,n.exports,o),n.exports}o.d=(e,t)=>{for(var r in t)o.o(t,r)&&!o.o(e,r)&&Object.defineProperty(e,r,{enumerable:!0,get:t[r]})},o.o=(e,t)=>Object.prototype.hasOwnProperty.call(e,t),o.r=e=>{"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})};var r={};return(()=>{o.r(r),o.d(r,{default:()=>d});class e{constructor(e){var t,o,r,i,n,s,l,a,u,d,c;this.overlay=document.createElement("div"),this.overlay.className=e.className||"_ext-element-overlay",this.overlay.style.background=(null===(t=e.style)||void 0===t?void 0:t.background)||"rgba(250, 240, 202, 0.2)",this.overlay.style.borderColor=(null===(o=e.style)||void 0===o?void 0:o.borderColor)||"#F95738",this.overlay.style.borderStyle=(null===(r=e.style)||void 0===r?void 0:r.borderStyle)||"solid",this.overlay.style.borderRadius=(null===(i=e.style)||void 0===i?void 0:i.borderRadius)||"1px",this.overlay.style.borderWidth=(null===(n=e.style)||void 0===n?void 0:n.borderWidth)||"1px",this.overlay.style.boxSizing=(null===(s=e.style)||void 0===s?void 0:s.boxSizing)||"border-box",this.overlay.style.cursor=(null===(l=e.style)||void 0===l?void 0:l.cursor)||"crosshair",this.overlay.style.position=(null===(a=e.style)||void 0===a?void 0:a.position)||"absolute",this.overlay.style.zIndex=(null===(u=e.style)||void 0===u?void 0:u.zIndex)||"2147483647",this.overlay.style.margin=(null===(d=e.style)||void 0===d?void 0:d.margin)||"0px",this.overlay.style.padding=(null===(c=e.style)||void 0===c?void 0:c.padding)||"0px",this.shadowContainer=document.createElement("div"),this.shadowContainer.className="_ext-element-overlay-container",this.shadowContainer.style.position="absolute",this.shadowContainer.style.top="0px",this.shadowContainer.style.left="0px",this.shadowContainer.style.margin="0px",this.shadowContainer.style.padding="0px",this.shadowRoot=this.shadowContainer.attachShadow({mode:"open"})}addToDOM(e,t){this.usingShadowDOM=t,t?(e.insertBefore(this.shadowContainer,e.firstChild),this.shadowRoot.appendChild(this.overlay)):e.appendChild(this.overlay)}removeFromDOM(){this.setBounds({x:0,y:0,width:0,height:0}),this.overlay.remove(),this.usingShadowDOM&&this.shadowContainer.remove()}captureCursor(){this.overlay.style.pointerEvents="auto"}ignoreCursor(){this.overlay.style.pointerEvents="none"}setBounds({x:e,y:t,width:o,height:r}){this.overlay.style.left=e+"px",this.overlay.style.top=t+"px",this.overlay.style.width=o+"px",this.overlay.style.height=r+"px"}}class t{constructor(t){this.handleMouseMove=e=>{this.mouseX=e.clientX,this.mouseY=e.clientY},this.handleClick=e=>{var t;this.target&&(null===(t=this.options)||void 0===t?void 0:t.onClick)&&this.options.onClick(this.target),e.preventDefault()},this.tick=()=>{this.updateTarget(),this.tickReq=window.requestAnimationFrame(this.tick)},this.active=!1,this.overlay=new e(null!=t?t:{})}start(e){var t,o;return!this.active&&(this.active=!0,this.options=e,document.addEventListener("mousemove",this.handleMouseMove,!0),document.addEventListener("click",this.handleClick,!0),this.overlay.addToDOM(null!==(t=e.parentElement)&&void 0!==t?t:document.body,null===(o=e.useShadowDOM)||void 0===o||o),this.tick(),!0)}stop(){this.active=!1,this.options=void 0,document.removeEventListener("mousemove",this.handleMouseMove,!0),document.removeEventListener("click",this.handleClick,!0),this.overlay.removeFromDOM(),this.target=void 0,this.mouseX=void 0,this.mouseY=void 0,this.tickReq&&window.cancelAnimationFrame(this.tickReq)}updateTarget(){var e,t;if(void 0===this.mouseX||void 0===this.mouseY)return;this.overlay.ignoreCursor();const o=document.elementFromPoint(this.mouseX,this.mouseY);if(this.overlay.captureCursor(),!o||o===this.target)return;if((null===(e=this.options)||void 0===e?void 0:e.elementFilter)&&!this.options.elementFilter(o))return this.target=void 0,void this.overlay.setBounds({x:0,y:0,width:0,height:0});this.target=o;const r=(e=>{const t=e.getBoundingClientRect();return{x:window.pageXOffset+t.left,y:window.pageYOffset+t.top,width:e.offsetWidth,height:e.offsetHeight}})(o);this.overlay.setBounds(r),(null===(t=this.options)||void 0===t?void 0:t.onHover)&&this.options.onHover(o)}}var i=o(761);function n(e){return n="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},n(e)}function s(e,t){for(var o=0;o<t.length;o++){var r=t[o];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,u(r.key),r)}}function l(e,t,o){return t&&s(e.prototype,t),o&&s(e,o),Object.defineProperty(e,"prototype",{writable:!1}),e}function a(e,t,o){return(t=u(t))in e?Object.defineProperty(e,t,{value:o,enumerable:!0,configurable:!0,writable:!0}):e[t]=o,e}function u(e){var t=function(e,t){if("object"!==n(e)||null===e)return e;var o=e[Symbol.toPrimitive];if(void 0!==o){var r=o.call(e,t||"default");if("object"!==n(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"===n(t)?t:String(t)}const d=l((function e(){var o=this;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),a(this,"currentMode","navigate"),a(this,"picker",null),a(this,"stopPicker",(function(){if(o.picker)return o.picker.stop(),void(o.picker=null)})),a(this,"startPicker",(function(){o.stopPicker();o.picker=new t({style:{borderColor:"#0000ff"}}),o.picker.start({onHover:function(e){return console.log("Hover: ".concat(e.tagName))},onClick:function(e){try{var t=(0,i.Z)(e);window.parent.postMessage({action:"elementPicked",selector:t},"*")}catch(e){}}})})),a(this,"setMode",(function(e){o.mode=e,"navigate"===e&&o.stopPicker(),"picker"===e&&o.startPicker()})),a(this,"receiveMessage",(function(e){e.origin,e.data&&e.data.helperApp&&"setMode"===e.data.action&&o.setMode(e.data.mode)})),window.addEventListener("message",this.receiveMessage,!1)}))})(),r})()));
//# sourceMappingURL=index.js.map